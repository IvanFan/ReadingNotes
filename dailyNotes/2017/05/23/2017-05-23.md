

# Reading Note - Interface development for getting products distributed services

## Cache Design
* The product data will be saved to cache (redis)
* Provide the interface for refreshing interface
* During the refreshing of redis, the front end should still have data
* Data cache should have version number. Everytime the cahce update should generate a new cache key
* Save the cache key to the list which can filter the latest verion by current time

## API Design

* interface parameter: version and page index
* response data: data and vurrent version
* use sortedset to get the latest version number
* the first time request will response the current latest version number
* the client will cache the version number. The next page request will need the cached version number
* return 304 if the client request the first page and local version number equal to current version number. So the client can avoid re-rendering the page
* if no version number within the request, Use the latest one

## Tips:

* infinite increase of version number: the version number will keep increasing. So we need to delete the version number of last day during update. Use sorted set to filter the version number
* when getting the latest version, capturing the version set for the last hour. Then use filter to get the latest one. When getting the data for the product, find the version number which contains the data if the product doesnot exist in current version


